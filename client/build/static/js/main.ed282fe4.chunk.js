(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{31:function(e,t,r){},85:function(e,t,r){"use strict";r.r(t);var a=r(1),n=r.n(a),c=r(27),i=r.n(c),s=(r(31),r(7)),o=r(4),l=r.n(o),d=r(6),u=r(3),p=r(5),j=r.n(p);var b=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),r=t[0],n=t[1],c=Object(a.useState)(!1),i=Object(u.a)(c,2),s=i[0],o=i[1],p=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("/api/products");case 2:t=e.sent,n(t.data.product);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){p()}),[s]),{products:[r,n],callback:[s,o]}},h=r(9),x=r(19);var m=function(e){var t=Object(a.useState)(!1),r=Object(u.a)(t,2),n=r[0],c=r[1],i=Object(a.useState)(!1),s=Object(u.a)(i,2),o=s[0],p=s[1],b=Object(a.useState)([]),m=Object(u.a)(b,2),O=m[0],f=m[1],g=Object(a.useState)([]),v=Object(u.a)(g,2),w=v[0],y=v[1],_=function(){var t=Object(d.a)(l.a.mark((function t(r){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return",alert("Please login to continue buying"));case 2:if(!O.every((function(e){return e._id!==r._id}))){t.next=9;break}return f([].concat(Object(x.a)(O),[Object(h.a)(Object(h.a)({},r),{},{quantity:1})])),t.next=7,j.a.patch("/user/addcart",{cart:[].concat(Object(x.a)(O),[Object(h.a)(Object(h.a)({},r),{},{quantity:1})])},{headers:{Authorization:e}});case 7:t.next=10;break;case 9:alert("This product has been added to cart.");case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){if(e){var t=function(){var t=Object(d.a)(l.a.mark((function t(){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j.a.get("/user/infor",{headers:{Authorization:e}});case 3:r=t.sent,c(!0),f(r.data.cart),1===r.data.role?p(!0):p(!1),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),alert(t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();t()}}),[e]),Object(a.useEffect)((function(){if(e){var t=function(){var t=Object(d.a)(l.a.mark((function t(){var r,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o){t.next=7;break}return t.next=3,j.a.get("/api/payment",{headers:{Authorization:e}});case 3:r=t.sent,y(r.data),t.next=11;break;case 7:return t.next=9,j.a.get("/user/history",{headers:{Authorization:e}});case 9:a=t.sent,y(a.data);case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}}),[e]),{isLogged:[n,c],isAdmin:[o,p],cart:[O,f],addCart:_,history:[w,y]}};var O=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),r=t[0],n=t[1],c=Object(a.useState)(!1),i=Object(u.a)(c,2),s=i[0],o=i[1];return Object(a.useEffect)((function(){var e=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("/api/category");case 2:t=e.sent,n(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),{categories:[r,n],callback:[s,o]}},f=r(0),g=Object(a.createContext)(),v=function(e){var t=e.children,r=Object(a.useState)(!1),n=Object(u.a)(r,2),c=n[0],i=n[1],s=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("/user/refresh_token");case 2:t=e.sent,i(t.data.accesstoken),setTimeout((function(){s()}),6e5);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){localStorage.getItem("firstLogin")&&s()}),[]);var o={token:[c,i],productsAPI:b(),userAPI:m(c),categoriesAPI:O()};return Object(f.jsx)(g.Provider,{value:o,children:t})},w=r(96),y=Object(w.a)((function(e){return{container:{padding:"0 20px",minHeight:"50px",width:"100%",overflow:"hidden",display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",alignItems:"center",borderBottom:"1px solid #ddd",backgroundColor:"black",position:"sticky",top:0,color:"white",zIndex:1},logo:{marginLeft:"50px",flex:1,textTransform:"uppercase",color:"white"},menu:{color:"white!important"},navbarItem:{display:"flex",alignItems:"center"},navbarItem_item:{opacity:.7,padding:"0 20px","&:hover":{opacity:1}},cart_icon:{position:"relative",marginRight:"10px"},cart_icon_span:{background:"crimson",borderRadius:"20px",color:"white",position:"absolute",top:"-10px",right:"-10px",padding:" 5px 7px",fontSize:"10px"}}})),_=(r.p,r.p+"static/media/shopping-cart-solid.ef8f0a22.svg");r.p;var k=function(){var e=y(),t=Object(a.useContext)(g),r=Object(u.a)(t.userAPI.isLogged,1)[0],n=Object(u.a)(t.userAPI.isAdmin,1)[0],c=Object(u.a)(t.userAPI.cart,1)[0],i=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("/user/logout");case 2:localStorage.removeItem("firstLogin"),window.location.href="/";case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)("header",{className:e.container,children:[Object(f.jsx)("div",{className:e.logo,children:Object(f.jsx)("h1",{children:Object(f.jsx)(s.b,{to:"/",children:n?"Admin":"Jelly's shop"})})}),Object(f.jsxs)("ul",{className:e.navbarItem,children:[Object(f.jsx)("li",{className:e.navbarItem_item,children:Object(f.jsx)(s.b,{to:"/",children:n?"Product":"Shop"})}),n&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("li",{className:e.navbarItem_item,children:Object(f.jsx)(s.b,{to:"/create_product",children:"Create Product"})}),Object(f.jsx)("li",{className:e.navbarItem_item,children:Object(f.jsx)(s.b,{to:"/category",children:"Categories"})})]}),r?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("li",{className:e.navbarItem_item,children:Object(f.jsx)(s.b,{to:"/history",children:"History"})}),Object(f.jsx)("li",{className:e.navbarItem_item,children:Object(f.jsx)(s.b,{to:"/",onClick:i,children:"Logout"})})]}):Object(f.jsx)("li",{className:e.navbarItem_item,children:Object(f.jsx)(s.b,{to:"/login",children:"Login/Register"})})]}),n?"":Object(f.jsxs)("div",{className:e.cart_icon,color:"#fff",children:[Object(f.jsx)("span",{className:e.cart_icon_span,children:c.length}),Object(f.jsx)(s.b,{to:"/cart",children:Object(f.jsx)("img",{src:_,alt:"gi\u1ecf h\xe0ng",width:"30",color:"#fff"})})]})]})},C=r(8);var N=function(){return Object(f.jsx)("div",{className:"load-page",children:Object(f.jsx)("div",{className:"loader",children:Object(f.jsx)("div",{children:Object(f.jsx)("div",{children:Object(f.jsx)("div",{children:Object(f.jsx)("div",{children:Object(f.jsx)("div",{children:Object(f.jsx)("div",{children:Object(f.jsx)("div",{children:Object(f.jsx)("div",{})})})})})})})})})})},I=Object(w.a)((function(e){return{product_card:{maxWidth:"300px",minWidth:"300px",overflow:"hidden",height:"500px",padding:"15px",boxShadow:"0 0 15px #ddd",margin:"10px 0",position:"relative"},image:{margin:"auto",maxWidth:"300px",height:"300px",display:"block",objectFit:"cover"},product_infor:{"& span":{color:"red"},"& h2":{width:"100%",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",textTransform:"capitalize",cursor:"pointer",color:"teal"},"& p":{width:"100%",display:"-webkit-box",webkitBoxOrient:"vertical",webkitLineClamp:3,height:"70px",overflow:"hidden",color:"#323232"}},row_btn:{width:"100%",marginTop:"10px",display:"flex",justifyContent:"space-between",backgroundColor:"teal","& a":{width:"50%",textTransform:"uppercase",color:"white",fontWeight:600,letterSpacing:"2px",padding:"6px"},"& #btn_buy":{background:"#555",marginRight:"5px"},"& # btn_view":{background:"teal",marginLeft:"5px"}}}})),A=function(e){var t=e.product,r=e.deleteProduct,n=I(),c=Object(a.useContext)(g),i=Object(u.a)(c.userAPI.isAdmin,1)[0],o=c.userAPI.addCart;return Object(f.jsx)("div",{children:i?Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("div",{className:n.row_btn,children:[Object(f.jsx)(s.b,{id:"btn_buy",to:"#!",onClick:function(){return r(t._id,t.images.public_id)},children:"Delete"}),Object(f.jsx)(s.b,{id:"btn_view",to:"/edit_product/".concat(t._id),children:"edit"})]})}):Object(f.jsxs)("div",{className:n.row_btn,children:[Object(f.jsx)(s.b,{id:"btn_buy",to:"#!",onClick:function(){return o(t)},children:"Buy"}),Object(f.jsx)(s.b,{id:"btn_view",to:"/detail/".concat(t._id),children:"View"})]})})};var S=function(e){var t=e.product,r=(e.isAdmin,e.deleteProduct),a=I();return Object(f.jsxs)("div",{className:a.product_card,children:[Object(f.jsx)("img",{className:a.image,src:t.images.url,alt:""}),Object(f.jsxs)("div",{className:a.product_infor,children:[Object(f.jsx)("h2",{title:t.title,children:t.title}),Object(f.jsxs)("span",{children:[t.price," VND"]}),Object(f.jsx)("p",{children:t.description})]}),Object(f.jsx)(A,{product:t,deleteProduct:r})]})};var P=function(){var e=Object(a.useContext)(g),t=Object(u.a)(e.productsAPI.products,1)[0],r=Object(u.a)(e.userAPI.isAdmin,1)[0],n=Object(u.a)(e.token,1)[0],c=Object(u.a)(e.productsAPI.callback,2),i=c[0],s=c[1],o=Object(a.useState)(!1),p=Object(u.a)(o,2),b=(p[0],p[1]),h=function(){var e=Object(d.a)(l.a.mark((function e(t,r){var a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(!0),a=j.a.post("/api/destroy",{public_id:r},{headers:{Authorization:n}}),c=j.a.delete("/api/products/".concat(t),{headers:{Authorization:n}}),e.next=6,a;case 6:return e.next=8,c;case 8:s(!i),b(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),alert(e.t0.response.data.msg);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,r){return e.apply(this,arguments)}}();return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"products",children:t.map((function(e){return Object(f.jsx)(S,{product:e,isAdmin:r,deleteProduct:h},e._id)}))}),0===t.length&&Object(f.jsx)(N,{})]})},T=Object(w.a)((function(e){return{Container:{marginTop:"20px",width:"100%",padding:"50px",fontSize:"150%",border:"solid 1px",alignItems:"center",borderRadius:"10px"},images:{maxWidth:"800px",minWidth:"300px",height:"500px",objectFit:"cover",margin:"auto",border:"solid 1px #ddd",display:"block"},box_detail:{marginTop:"20px",justifyContent:"space-between",width:"100%",borderTop:"1px solid #ddd","& h2":{textTransform:"uppercase",color:"darkblue",letterSpacing:"2px",fontWeight:"2rem"},"$ p":{lineHeight:"1.5",margin:"10px 0",opacity:.8}},row:{display:"flex",justifyContent:"space-between",alignItems:"center"},cart:{background:"#333",color:"white",marginTop:"10px",padding:"10px 25px",display:"inline-block",textTransform:"uppercase",letterSpacing:"2px",marginBottom:"30px"},product:{width:"100%",display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(300px,1fr))",justifyItems:"center",margin:"0 20px"},fullImage:{borderTop:"1px solid #ddd",padding:"20px",width:"90%",height:"auto","& img":{width:"100%",height:"100%"},margin:"auto"},CartItem:{width:"500px",height:"500px",position:"relative",border:"1px solid #ccc",transform:"scaleY(0.98)"},amount:{"& span":{color:"crimson",padding:"0 20px"},"& button":{width:"40px",height:"40px",border:"1px solid #777"}},delete:{position:"absolute",top:0,right:"5px",color:"crimson",fontWeight:900,cursor:"pointer"},total:{width:"100%",height:"50px",display:"flex",alignItems:"center",justifyContent:"space-between","& h3":{color:"crimson"}}}}));var z=function(){var e=Object(C.g)(),t=Object(a.useContext)(g),r=Object(u.a)(t.productsAPI.products,1)[0],n=Object(a.useState)([]),c=Object(u.a)(n,2),i=c[0],o=c[1],l=T(),d=t.userAPI.addCart;return Object(a.useEffect)((function(){console.log("re render"),e.id&&r.forEach((function(t){t._id===e.id&&o(t)}))}),[e.id,r]),0===i.length?null:Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:l.Container,children:[Object(f.jsx)("img",{className:l.images,src:i.images.url,alt:""}),Object(f.jsxs)("div",{className:l.box_detail,children:[Object(f.jsxs)("div",{className:l.row,children:[Object(f.jsx)("h2",{children:i.title}),Object(f.jsxs)("h6",{children:["ID: ",i.product_id]})]}),Object(f.jsxs)("span",{children:["$ ",i.price]}),Object(f.jsx)("p",{children:i.description}),Object(f.jsx)("p",{children:i.content}),Object(f.jsxs)("p",{children:["sold: ",i.sold]}),Object(f.jsx)(s.b,{to:"/cart",className:l.cart,onClick:function(){return d(i)},children:"Buy Now"})]}),Object(f.jsxs)("div",{className:l.fullImage,children:[Object(f.jsx)("h2",{children:"Full Picture"}),Object(f.jsx)("img",{src:i.images.url,alt:""})]})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Related Products"}),Object(f.jsx)("div",{className:l.product,children:r.map((function(e){return e.category===i.category?Object(f.jsx)(S,{className:l.product,product:e},e._id):null}))})]})]})},D=r(18),q=Object(w.a)((function(e){return{loginPage:{backgroundImage:'url("./img/login.png")',width:"500px",height:"500px",border:"2px solid teal",borderRadius:"5px",margin:"auto",padding:"30px","& input":{width:"100%",height:"40px",margin:"10px 0",padding:"0 5px",outline:"teal",border:"1px solid teal",borderRadius:"10px"},"& button":{width:"150px",height:"40px",margin:"10px 0",padding:"0 5px",outline:"teal",border:"1px solid teal",backgroundColor:"rgb(3 , 165 , 206)",color:"white",fontWeight:"500"},"& a":{color:"rgb(3 , 165 , 290)",letterSpacing:"1.3px",fontWeight:"700",marginLeft:"30px"}},row:{display:"flex",justifyContent:"space-between",alignItems:"center"}}}));var F=function(){var e=q(),t=Object(a.useState)({email:"",password:""}),r=Object(u.a)(t,2),n=r[0],c=r[1],i=function(e){var t=e.target,r=t.name,a=t.value;c(Object(h.a)(Object(h.a)({},n),{},Object(D.a)({},r,a)))},o=function(){var e=Object(d.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,j.a.post("/user/login",Object(h.a)({},n));case 4:r=e.sent,localStorage.setItem("firstLogin",!0),window.location.href="/",console.log(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)("div",{className:e.loginPage,children:Object(f.jsxs)("form",{onSubmit:o,children:[Object(f.jsx)("div",{class:"auth-form__header",children:Object(f.jsx)("h3",{class:"auth-form__heading",children:"Login"})}),Object(f.jsx)("input",{type:"email",name:"email",required:!0,placeholder:"email",value:n.email,onChange:i}),Object(f.jsx)("input",{type:"password",name:"password",required:!0,placeholder:"password",autoComplete:"on",value:n.password,onChange:i}),Object(f.jsxs)("div",{className:e.row,children:[Object(f.jsx)(s.b,{to:"/register",children:"Register"}),Object(f.jsx)("button",{type:"submit",children:"Login"})]})]})})};var L=function(){var e=q(),t=Object(a.useState)({name:"",email:"",password:""}),r=Object(u.a)(t,2),n=r[0],c=r[1],i=function(e){var t=e.target,r=t.name,a=t.value;c(Object(h.a)(Object(h.a)({},n),{},Object(D.a)({},r,a)))},o=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,j.a.post("/user/register",Object(h.a)({},n));case 4:localStorage.setItem("firstLogin",!0),window.location.href="/",e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)("div",{className:e.loginPage,children:Object(f.jsxs)("form",{onSubmit:o,children:[Object(f.jsx)("h3",{class:"auth-form__heading",children:"\u0110\u0103ng k\xfd"}),Object(f.jsx)("input",{type:"text",name:"name",required:!0,placeholder:"Name",value:n.name,onChange:i}),Object(f.jsx)("input",{type:"email",name:"email",required:!0,placeholder:"email",value:n.email,onChange:i}),Object(f.jsx)("input",{type:"password",name:"password",required:!0,placeholder:"password",autoComplete:"on",value:n.password,onChange:i}),Object(f.jsxs)("div",{class:"auth-form__aside",children:[Object(f.jsx)("p",{class:"auth-form__policy-text",children:"B\u1eb1ng vi\u1ec7c \u0111\u0103ng k\xfd, b\u1ea1n \u0111\u1ed3ng \xfd v\u1edbi \u0111i\u1ec1u kho\u1ea3n d\u1ecbch v\u1ee5 v\xe0 ch\xednh s\xe1ch b\u1ea3o m\u1eadt c\u1ee7a ch\xfang t\xf4i"}),Object(f.jsx)("a",{href:"",class:"auth-form__link",children:"Di\u1ec1u kho\u1ea3n d\u1ecbch v\u1ee5 v\xe0 ch\xednh s\xe1ch b\u1ea3o m\u1eadt"})]}),Object(f.jsxs)("div",{className:e.row,children:[Object(f.jsx)(s.b,{to:"/login",children:"Login"}),Object(f.jsx)("button",{type:"submit",children:"Register"})]})]})})},E=Object(w.a)((function(e){return{Container:{marginTop:"20px",width:"60%",maxheight:"800px",display:"flex",padding:"50px",fontSize:"150%",border:"solid 1px",alignItems:"center",borderRadius:"10px",margin:"auto"},images:{maxWidth:"800px",minWidth:"300px",maxheight:"500px",objectFit:"cover",margin:"auto",border:"solid 1px #ddd",display:"block"},box_detail:{paddingLeft:"20px",marginTop:"20px",justifyContent:"space-between",width:"100%","& h2":{textTransform:"uppercase",color:"darkblue",letterSpacing:"2px",fontWeight:"2rem"},"$ p":{lineHeight:"1.5",margin:"10px 0",opacity:.8}},row:{display:"flex",justifyContent:"space-between",alignItems:"center"},cart:{background:"#333",color:"white",marginTop:"10px",padding:"10px 25px",display:"inline-block",textTransform:"uppercase",letterSpacing:"2px",marginBottom:"30px"},product:{width:"100%",display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(300px,1fr))",justifyItems:"center",margin:"0 20px"},fullImage:{padding:"20px",width:"90%",height:"auto","& img":{width:"100%",height:"100%"},margin:"auto"},CartItem:{width:"500px",height:"500px",position:"relative",border:"1px solid #ccc",transform:"scaleY(0.98)"},amount:{"& span":{color:"crimson",padding:"0 20px"},"& button":{width:"40px",height:"40px",border:"1px solid #777",borderRadius:"5px"}},delete:{right:"5px",color:"crimson",fontWeight:900,cursor:"pointer"},total:{width:"100%",height:"50px",display:"flex",alignItems:"center",justifyContent:"space-between","& h3":{color:"crimson"}}}})),W=r(45),B=r(46),R=r(49),Y=r(48),U=r(47),H=r.n(U),J=function(e){Object(R.a)(r,e);var t=Object(Y.a)(r);function r(){return Object(W.a)(this,r),t.apply(this,arguments)}return Object(B.a)(r,[{key:"render",value:function(){var e=this,t=this.props.total;console.log(this.props.total);return Object(f.jsx)(H.a,{env:"sandbox",client:{sandbox:"Af8RP6ZxltiziBNqprmwaWfBDAhRpoyeSE4qFO_aEQBnne2SzRSUyDplhSFKowzZSPaqaf5ZLacSgPht",production:"YOUR-PRODUCTION-APP-ID"},currency:"USD",total:t,onError:function(e){console.log("Error!",e)},onSuccess:function(t){console.log("The payment was succeeded!",t),e.props.tranSuccess(t)},onCancel:function(e){console.log("The payment was cancelled!",e)},style:{size:"small",color:"blue",shape:"rect",label:"checkout",tagline:!1}})}}]),r}(n.a.Component);var $=function(){var e=Object(a.useContext)(g),t=Object(u.a)(e.userAPI.cart,2),r=t[0],n=t[1],c=E(),i=Object(a.useState)(0),s=Object(u.a)(i,2),o=s[0],p=s[1],b=Object(u.a)(e.token,1)[0];if(Object(a.useEffect)((function(){!function(){var e=r.reduce((function(e,t){return e+t.price*t.quantity}),0);p(e)}()}),[r]),0===r.length)return Object(f.jsx)("h2",{style:{textAlign:"center",fontSize:"5rem"},children:"Cart Empty"});var h=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.patch("/user/addcart",{cart:t},{headers:{Authorization:b}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(d.a)(l.a.mark((function e(t){var a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.paymentID,c=t.address,e.next=3,j.a.post("/api/payment",{cart:r,paymentID:a,address:c},{headers:{Authorization:b}});case 3:n([]),h([]),alert("You have successfully placed an order.");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)(f.Fragment,{children:[r.map((function(e){return Object(f.jsxs)("div",{className:c.Container,children:[Object(f.jsx)("img",{className:c.images,src:e.images.url,alt:""}),Object(f.jsxs)("div",{className:c.box_detail,children:[Object(f.jsx)("div",{className:c.row,children:Object(f.jsx)("h2",{children:e.title})}),Object(f.jsxs)("span",{children:["$ ",e.price*e.quantity]}),Object(f.jsx)("p",{children:e.description}),Object(f.jsx)("p",{children:e.content}),Object(f.jsxs)("p",{children:["sold: ",e.sold]}),Object(f.jsxs)("div",{className:c.amount,children:[Object(f.jsx)("button",{onClick:function(){return t=e._id,r.forEach((function(e){e._id===t&&(1===e.quantity?e.quantity=1:e.quantity-=1)})),n(Object(x.a)(r)),void h(r);var t},children:" - "}),Object(f.jsx)("span",{children:e.quantity}),Object(f.jsx)("button",{onClick:function(){return t=e._id,r.forEach((function(e){e._id===t&&(e.quantity+=1)})),n(Object(x.a)(r)),void h(r);var t},children:" + "}),Object(f.jsx)("div",{className:c.delete,onClick:function(){return t=e._id,void(window.confirm("Do you want to delete this product?")&&(r.forEach((function(e,a){e._id===t&&r.splice(a,1)})),n(Object(x.a)(r)),h(r)));var t},children:"X"})]})]})]},e._id)})),Object(f.jsxs)("div",{className:c.total,children:[Object(f.jsxs)("h3",{children:[" Total: ",o," "]}),Object(f.jsx)(J,{total:o,tranSuccess:m})]})]})};var V=function(){return Object(f.jsx)("div",{children:"404 | Not Found"})},X=Object(w.a)((function(e){return{history_page:{overflowX:"auto","& h2":{textAlign:"center",margin:"20px",textTransform:"uppercase",letterSpacing:"1.2px"},"& h4":{textAlign:"center",margin:"20px",textTransform:"uppercase",letterSpacing:"1.2px"},"& table":{margin:"auto",width:"100%"},"& th":{border:"1px solid #ddd",borderCollapse:"collapse",textAlign:"center",padding:"10px"},"& tr":{border:"1px solid #ddd",borderCollapse:"collapse"},"& td":{border:"1px solid #ddd",borderCollapse:"collapse",textAlign:"center",padding:"10px"},"& a":{color:"teal"}}}}));var Z=function(){var e=Object(a.useContext)(g),t=Object(u.a)(e.userAPI.history,2),r=t[0],n=t[1],c=Object(u.a)(e.userAPI.isAdmin,1)[0],i=Object(u.a)(e.token,1)[0],o=X();return Object(a.useEffect)((function(){if(i){var e=function(){var e=Object(d.a)(l.a.mark((function e(){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=7;break}return e.next=3,j.a.get("/api/payment",{headers:{Authorization:i}});case 3:t=e.sent,n(t.data),e.next=11;break;case 7:return e.next=9,j.a.get("/user/history",{headers:{Authorization:i}});case 9:r=e.sent,n(r.data);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}}),[i,c,n]),Object(f.jsxs)("div",{className:o.history_page,children:[Object(f.jsx)("h2",{children:"History"}),Object(f.jsxs)("h4",{children:["You have ",r.length," ordered"]}),Object(f.jsxs)("table",{children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"Payment ID"}),Object(f.jsx)("th",{children:"Date of Purchased"}),Object(f.jsx)("th",{})]})}),Object(f.jsx)("tbody",{children:r.map((function(e){return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:e.paymentID}),Object(f.jsx)("td",{children:new Date(e.createdAt).toLocaleDateString()}),Object(f.jsx)("td",{children:Object(f.jsx)(s.b,{to:"/history/".concat(e._id),children:"View"})})]},e._id)}))})]})]})},G=Object(w.a)((function(e){return{row:{display:"flex",justifyContent:"space-between",alignItems:"center",minWidth:"290px",padding:"10px",marginBottom:"10px",border:"1px solid #ccc"},categories:{maxWidth:"700px",display:"flex",flexWrap:"wrap",justifyContent:"space-around",margin:"30px auto","& form":{width:"290px",marginBottom:"20px"},"& label":{display:"block",fontWeight:700,letterSpacing:"2px",textTransform:"uppercase",marginBottom:"10px"},"& input":{height:"35px",border:"none",outline:"none",borderBottom:"1px solid #555",width:"210px"},"& button":{height:"35px",border:"none",outline:"none",borderBottom:"1px solid #555",width:"70px",background:"#555",color:"white",marginLeft:"10px"}}}}));var K=function(){var e=Object(a.useContext)(g),t=G(),r=Object(u.a)(e.categoriesAPI.categories,1)[0],n=Object(a.useState)(""),c=Object(u.a)(n,2),i=c[0],s=c[1],o=Object(u.a)(e.token,1)[0],p=Object(u.a)(e.categoriesAPI.callback,2),b=p[0],h=p[1],x=Object(a.useState)(!1),m=Object(u.a)(x,2),O=m[0],v=m[1],w=Object(a.useState)(""),y=Object(u.a)(w,2),_=y[0],k=y[1],C=function(){var e=Object(d.a)(l.a.mark((function e(t){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!O){e.next=9;break}return e.next=5,j.a.put("/api/category/".concat(_),{name:i},{headers:{Authorization:o}});case 5:r=e.sent,alert(r.data.msg),e.next=13;break;case 9:return e.next=11,j.a.post("/api/category",{name:i},{headers:{Authorization:o}});case 11:a=e.sent,alert(a.data.msg);case 13:v(!1),s(""),h(!b),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 21:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(d.a)(l.a.mark((function e(t,r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k(t),s(r),v(!0);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),I=function(){var e=Object(d.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.delete("/api/category/".concat(t),{headers:{Authorization:o}});case 3:r=e.sent,alert(r.data.msg),h(!b),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert(e.t0.response.data.msg);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:t.categories,children:[Object(f.jsxs)("form",{onSubmit:C,children:[Object(f.jsx)("label",{htmlFor:"category",children:"Category"}),Object(f.jsx)("input",{type:"text",name:"category",value:i,required:!0,onChange:function(e){return s(e.target.value)}}),Object(f.jsx)("button",{type:"submit",children:O?"Update":"Create"})]}),Object(f.jsx)("div",{className:t.col,children:r.map((function(e){return Object(f.jsxs)("div",{className:t.row,children:[Object(f.jsx)("p",{children:e.name}),Object(f.jsxs)("div",{children:[Object(f.jsx)("button",{onClick:function(){return N(e._id,e.name)},children:"Edit"}),Object(f.jsx)("button",{onClick:function(){return I(e._id)},children:"Delete"})]})]},e._id)}))})]})},Q={product_id:"",title:"",price:0,description:"Description of picture",content:"Content of picture",category:"",_id:""};var M=function(){var e=Object(a.useContext)(g),t=Object(a.useState)(Q),r=Object(u.a)(t,2),n=r[0],c=r[1],i=Object(u.a)(e.categoriesAPI.categories,1)[0],s=Object(a.useState)(!1),o=Object(u.a)(s,2),p=o[0],b=o[1],x=Object(a.useState)(!1),m=Object(u.a)(x,2),O=m[0],v=m[1],w=Object(u.a)(e.userAPI.isAdmin,1)[0],y=Object(u.a)(e.token,1)[0],_=Object(C.f)(),k=Object(C.g)(),I=Object(u.a)(e.productsAPI.products,1)[0],A=Object(a.useState)(!1),S=Object(u.a)(A,2),P=S[0],T=S[1],z=Object(u.a)(e.productsAPI.callback,2),q=z[0],F=z[1];Object(a.useEffect)((function(){k.id?(T(!0),I.forEach((function(e){e._id===k.id&&(c(e),b(e.images))}))):(T(!1),c(Q),b(!1))}),[k.id,I]);var L=function(){var e=Object(d.a)(l.a.mark((function e(t){var r,a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,w){e.next=4;break}return e.abrupt("return",alert("You're not an admin"));case 4:if(r=t.target.files[0]){e.next=7;break}return e.abrupt("return",alert("File not exist."));case 7:if(!(r.size>1048576)){e.next=9;break}return e.abrupt("return",alert("Size too large!"));case 9:if("image/jpeg"===r.type||"image/png"===r.type){e.next=11;break}return e.abrupt("return",alert("File format is incorrect."));case 11:return(a=new FormData).append("file",r),v(!0),e.next=16,j.a.post("/api/upload",a,{headers:{"content-type":"multipart/form-data",Authorization:y}});case 16:n=e.sent,v(!1),b(n.data),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 24:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,w){e.next=3;break}return e.abrupt("return",alert("You're not an admin"));case 3:return v(!0),e.next=6,j.a.post("/api/destroy",{public_id:p.public_id},{headers:{Authorization:y}});case 6:v(!1),b(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),alert(e.t0.response.data.msg);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),W=function(e){var t=e.target,r=t.name,a=t.value;c(Object(h.a)(Object(h.a)({},n),{},Object(D.a)({},r,a)))},B=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,w){e.next=4;break}return e.abrupt("return",alert("You're not an admin"));case 4:if(p){e.next=6;break}return e.abrupt("return",alert("No Image Upload"));case 6:if(!P){e.next=11;break}return e.next=9,j.a.put("/api/products/".concat(n._id),Object(h.a)(Object(h.a)({},n),{},{images:p}),{headers:{Authorization:y}});case 9:e.next=13;break;case 11:return e.next=13,j.a.post("/api/products",Object(h.a)(Object(h.a)({},n),{},{images:p}),{headers:{Authorization:y}});case 13:F(!q),alert("Create success"),_.push("/"),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 21:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}(),R={display:p?"block":"none"};return Object(f.jsxs)("div",{className:"create_product",children:[Object(f.jsxs)("div",{className:"upload",children:[Object(f.jsx)("input",{type:"file",name:"file",id:"file_up",onChange:L}),O?Object(f.jsx)("div",{id:"file_img",children:Object(f.jsx)(N,{})}):Object(f.jsxs)("div",{id:"file_img",style:R,children:[Object(f.jsx)("img",{src:p?p.url:"",alt:""}),Object(f.jsx)("span",{onClick:E,children:"X"})]})]}),Object(f.jsxs)("form",{onSubmit:B,children:[Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("label",{htmlFor:"product_id",children:"Product ID"}),Object(f.jsx)("input",{type:"text",name:"product_id",id:"product_id",required:!0,value:n.product_id,onChange:W,disabled:P})]}),Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("label",{htmlFor:"title",children:"Title"}),Object(f.jsx)("input",{type:"text",name:"title",id:"title",required:!0,value:n.title,onChange:W})]}),Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("label",{htmlFor:"price",children:"Price"}),Object(f.jsx)("input",{type:"number",name:"price",id:"price",required:!0,value:n.price,onChange:W})]}),Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("label",{htmlFor:"description",children:"Description"}),Object(f.jsx)("textarea",{type:"text",name:"description",id:"description",required:!0,value:n.description,rows:"5",onChange:W})]}),Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("label",{htmlFor:"content",children:"Content"}),Object(f.jsx)("textarea",{type:"text",name:"content",id:"content",required:!0,value:n.content,rows:"7",onChange:W})]}),Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("label",{htmlFor:"categories",children:"Categories: "}),Object(f.jsxs)("select",{name:"category",value:n.category,onChange:W,children:[Object(f.jsx)("option",{value:"",children:"Please select a category"}),i.map((function(e){return Object(f.jsx)("option",{value:e._id,children:e.name},e._id)}))]})]}),Object(f.jsx)("button",{type:"submit",children:P?"Update":"Create"})]})]})};var ee=function(){var e=Object(a.useContext)(g),t=Object(u.a)(e.userAPI.isLogged,1)[0],r=Object(u.a)(e.userAPI.isAdmin,1)[0];return Object(f.jsxs)(C.c,{children:[Object(f.jsx)(C.a,{path:"/",exact:!0,component:P}),Object(f.jsx)(C.a,{path:"/detail/:id",exact:!0,component:z}),Object(f.jsx)(C.a,{path:"/login",exact:!0,component:t?V:F}),Object(f.jsx)(C.a,{path:"/register",exact:!0,component:t?V:L}),Object(f.jsx)(C.a,{path:"/cart",exact:!0,component:$}),Object(f.jsx)(C.a,{path:"/history",exact:!0,component:t?Z:V}),Object(f.jsx)(C.a,{path:"/category",exact:!0,component:r?K:V}),Object(f.jsx)(C.a,{path:"/create_product",exact:!0,component:r?M:V}),Object(f.jsx)(C.a,{path:"/edit_product/:id",exact:!0,component:r?M:V}),Object(f.jsx)(C.a,{path:"/loading",exact:!0,component:N}),Object(f.jsx)(C.a,{path:"*",exact:!0,component:V})]})};var te=function(){return Object(f.jsx)("div",{className:"footer",children:Object(f.jsxs)("div",{className:"footerContainer",children:[Object(f.jsxs)("div",{className:"footer_introduce",children:[Object(f.jsx)("h5",{className:"contact_name",children:"Gi\u1edbi thi\u1ec7u"}),Object(f.jsx)("div",{className:"introduce-text",children:"Tranh C\u1ee7a Jelly is a personal web that show and sell pictures and DIY of Jelly"})]}),Object(f.jsxs)("div",{className:"footer_contact",children:[Object(f.jsx)("div",{className:"footer_contact__link",children:Object(f.jsxs)("div",{className:"footer_contact__link_item",children:[Object(f.jsx)("h5",{className:"contact_name",children:"Li\xean K\u1ebft"}),Object(f.jsxs)("ul",{children:[Object(f.jsx)("li",{children:"Trang Ch\u1ee7"}),Object(f.jsx)("li",{children:"\u0110\u0103ng k\xfd"})]})]})}),Object(f.jsxs)("div",{className:"footer_contact__help",children:[Object(f.jsx)("h5",{className:"contact_name",children:"Tr\u1ee3 Gi\xfap"}),Object(f.jsxs)("ul",{children:[Object(f.jsx)("li",{className:"contact_name_item",children:"B\xe1o l\u1ed7i"}),Object(f.jsx)("li",{className:"contact_name_item",children:"B\u1ea3o m\u1eadt"}),Object(f.jsx)("li",{className:"contact_name_item",children:"\u0110i\u1ec1u l\u1ec7"}),Object(f.jsx)("li",{className:"contact_name_item",children:"Li\xean h\u1ec7"})]})]}),Object(f.jsxs)("div",{className:"footer_contact__contact",children:[Object(f.jsx)("h5",{className:"contact_name",children:"Li\xean h\u1ec7"}),Object(f.jsx)("ul",{children:Object(f.jsx)("li",{children:"Email: Onehitkillall@gmail.com"})})]})]})]})})};var re=function(){return Object(f.jsx)(v,{children:Object(f.jsx)(s.a,{children:Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)(k,{}),Object(f.jsx)("div",{className:"Container",children:Object(f.jsx)(ee,{})}),Object(f.jsx)(te,{})]})})})};i.a.render(Object(f.jsx)(re,{}),document.getElementById("root"))}},[[85,1,2]]]);
//# sourceMappingURL=main.ed282fe4.chunk.js.map